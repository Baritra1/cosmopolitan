import { Client } from "@googlemaps/google-maps-services-js";
import axios from "axios";

const client = new Client({ axiosInstance: axios });
const key = process.env.NEXT_PUBLIC_MAPS_KEY as string;

export async function getLocation(
  address: string
): Promise<[number, number] | null> {
  const format = encodeURIComponent(address);
  const args = {
    params: {
      key,
      components: { country: "us" },
      address: format,
    },
  };

  const gcResponse = await client.geocode(args);

  if (gcResponse.data.results.length === 0) {
    console.log("No results found for address:", address);
    return null;
  }

  const location = gcResponse.data.results[0].geometry.location;
  console.log(location);
  return [location.lat, location.lng];
}
